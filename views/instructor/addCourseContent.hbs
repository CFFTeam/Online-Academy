<div class="course-content">
    <div class="curriculum">
        <span class="title">Curriculum</span>
        <div class="mode">
            <a href="/preview">Preview</a>
            <a href="/add-course-description">Description</a>
            <a href="/add-course-content" class="active">Content</a>
        </div>
    </div>
    <div class="section">
        {{#each this.sections}}
        <div class="section-heading">
            <div class="section-title">{{title}}</div>
            <button class="edit-btn" type="button"><img src="/assets/svg/instructor/edit-section.svg"
                    alt="edit-btn"></button>
        </div>
        {{#each lessons}}
        <div class="lesson">
            <span class="lesson-title"><img src="/assets/svg/instructor/lesson.svg" alt="lesson">{{title}}</span>
            <a href="{{../../url}}&lesson={{this._id}}" class="edit-lesson-btn"><img
                    src="/assets/svg/instructor/edit-lesson.svg" alt="edit-lesson"></a>
        </div>
        {{/each}}
        <div class="new-lesson">
            <a href="{{../url}}&section={{this._id}}" class="add-new-lesson-btn">
                <img src="/assets/svg/instructor/add-new.svg" alt="add-new-icon">
                <span class="title">Add a new lesson</span>
            </a>
        </div>
        {{/each}}
    </div>
    <div class="new-section">
        <form action="{{url}}&section={{section_id}}" method="post">
            {{!-- <a class="add-new-section-btn" href="{{url}}&section={{section_id}}">
                <img src="/assets/svg/instructor/add-new.svg" alt="add-new-icon">
                <span class="title">Add a new section</span>
            </a> --}}
            <button class="add-new-section-btn" type="submit">
                <img src="/assets/svg/instructor/add-new.svg" alt="add-new-icon">
                <span class="title">Add a new section</span>
            </button>
        </form>

    </div>
    <div class="confirm-section">
        <button class="save-btn">SAVE</button>
        <button class="finish-btn">FINISH THE COURSE</button>
    </div>
</div>
{{!-- backdrop --}}
<div class="{{#if lesson.title}}show {{/if}}{{#if section_id}}show {{/if}}backdrop"></div>
{{!-- edit lesson form --}}
<div class="{{#if lesson.title}}show {{/if}}{{#if section_id}}show {{/if}}handle-lesson-form">
    <div class="title">Edit a custom lesson</div>
    <div class="heading">
        <a class="lecture-section active">Lecture</a>
        <a class="resources-section">Resources</a>
        <a class="quizz-section">Quizz</a>
        <a class="announcements-section">Announcements</a>
    </div>
    <form action="" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="txtLectureTitle" class="lecture-title">Lecture Title</label>
            <input name="lecture_title" type="text" id="txtLectureTitle" placeholder="Enter your lecture title"
                value="{{#if lesson.title}}{{lesson.title}}{{/if}}" />
        </div>
        <div class="form-group">
            <label for="video-uploader">Video uploader</label>
            <div class="message">Use the video uploader to upload videos into your lecture</div>
            <label class="video" for="videoUploadFile">
                <div class="specific">
                    <span class="upload-video-icon"><img src="/assets/svg/instructor/upload-lesson.svg"
                            alt="upload-icon"></span>
                    <span class="upload-video-message">Drop video files here or click to choose</span>
                </div>
            </label>
            <input name="videoUploadFile" id="videoUploadFile" type="file" style="display: none;">
            <div class="cancel-upload">
                <button class="cancel-upload-btn" type="button">Cancel upload</button>
            </div>
        </div>
        <div class="confirm-section">
            <button class="publish-btn" type="submit" name="requestAction" value="publish">Publish</button>
            <button class="cancel-btn" type="submit" name="requestAction" value="cancel">Cancel</button>
        </div>
    </form>
</div>

<script>
    // show/hide overlay and edit lesson form when user click
    $(".backdrop, .cancel-btn").click(() => {
        $('.backdrop').removeClass("show");
        $('.handle-lesson-form').removeClass("show");
        $('.backdrop').addClass("hide");
        $('.handle-lesson-form').addClass("hide");
    })
    $('.add-new-lesson-btn').click(() => {
        $('.backdrop').removeClass("hide");
        $('.handle-lesson-form').removeClass("hide");
        $('.backdrop').addClass("show");
        $('.handle-lesson-form').addClass("show");
    })
    // set file name when uploading
    $('#videoUploadFile').change(function (event) {
        const filename = event.target.files[0].name;
        $('.upload-video-message').text(filename);
        $('.upload-video-message').css("color", "#495057");
    })
    // cancel upload
    $('.cancel-upload-btn').click(() => {
        $('#videoUploadFile').val(null);
        $('.upload-video-message').text("Drop video files here or click to choose");
    })
    // display message when user upload file
    if ("{{message}}" == "success") {
        alert("Your change was saved successfully...");
        window.location.replace("http://localhost:5000/instructor/add-course-content/?course={{course_id}}");
    }
    if ("{{message}}" !== "success" && "{{message}}" != "") {
        alert("{{message}}");
        window.location.replace("http://localhost:5000/instructor/add-course-content/?course={{course_id}}");
    }
</script>

{{!-- $('.edit-lesson-btn, .add-new-lesson-btn').click(() => {
$('.backdrop').removeClass("hide");
$('.handle-lesson-form').removeClass("hide");
$('.backdrop').addClass("show");
$('.handle-lesson-form').addClass("show");
}) --}}